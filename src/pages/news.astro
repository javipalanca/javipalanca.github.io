---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import newsData from '../../public/json/news.json';

const news = newsData.news || [];
---

<BaseLayout title="All News - SPADE">
	<Navbar />
	<div class="container py-5">
		<h1 class="mb-5">Latest News</h1>
		<div class="row">
			{news.map((item) => (
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="card h-100 news-card">
						{item.image && (
							<img src={`${import.meta.env.BASE_URL}${item.image.startsWith('/') ? item.image.slice(1) : item.image}`} class="card-img-top" alt={item.title} />
						)}
						<div class="card-body">
							<div class="d-flex justify-content-between align-items-start mb-2">
								<h5 class="card-title">{item.title}</h5>
								<span class={`badge ${item.categoryClass}`}>{item.category}</span>
							</div>
							<p class="card-text">{item.description}</p>
							<small class="text-muted d-block mb-3">
								{new Date(item.date).toLocaleDateString('en-US', { 
									year: 'numeric', 
									month: 'long', 
									day: 'numeric' 
								})}
							</small>
							{item.link && (
								<a href={item.link} class="btn btn-sm btn-primary" target="_blank">
									Learn More
								</a>
							)}
						</div>
					</div>
				</div>
			))}
		</div>
	</div>

	<style>
		.news-card {
			transition: transform 0.3s ease, box-shadow 0.3s ease;
			border: none;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
		}

		.news-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
		}

		.news-card img {
			object-fit: cover;
			height: 200px;
		}

		body.dark-mode .news-card {
			background: var(--dark-card-bg);
			border-color: rgba(255, 255, 255, 0.1);
		}
	</style>
	<Footer />
</BaseLayout>
